{"version":3,"sources":["components/navigation/navigation.js","components/data-map/layers-setup.js","components/data-map/data-map.js","components/data-panel/data-chart.js","utilities/data-mutations.js","utilities/formatting.js","components/data-panel/data-panel.js","components/loader/loader.js","components/survey/survery.js","data-mockup.js","App.js","utilities/interfaces.js","serviceWorker.js","index.js"],"names":["Navigation","handleToggle","setState","isExpanded","state","handleCollapse","this","clsNav","clsToggle","className","onClick","to","activeClassName","Component","MenuIcon","width","height","viewBox","d","HomeIcon","TableIcon","SurveyIcon","ContactIcon","ImprintIcon","circleLayer","id","type","source","paint","countLayer","layout","DataMap","data","mapStyle","useState","latitude","longitude","zoom","viewport","setViewport","mapStyleURI","onViewportChange","mapboxApiAccessToken","style","position","bottom","right","PingChart","props","node","chart","Chart","labels","datasets","label","borderColor","backgroundColor","borderWidth","options","elements","point","radius","legend","display","scales","xAxes","yAxes","ticks","beginAtZero","ref","e","__sum","x","y","__or","__ensureArray","__condenseDataset","prop","dataset","map","p","reduce","condenseData","r","Object","keys","forEach","t","condenseDataset","__filterPropValuePair","values","filter","array","possiblities","includes","__bigIntegerDisplayFormater","Intl","NumberFormat","bigIntegerDisplay","number","format","__percentageDisplayFormater","maximumSignificantDigits","percentageDisplay","DataPanelTiles","confirmed","deaths","recovered","cls","heading","DataPanelTile","children","DataPanelControls","onToggleFilters","onToggleCharts","FilterIcon","ArrowLeftIcon","DataPanel","currentTime","chartsExpanded","confirmedValues","recoveredValues","deathsValues","condensedDataCurrent","controlHandlers","clsCharts","Loader","Array","key","Survey","__DATA__MOCKUP","1584820500000","province","country","latlng","active","1584820800000","1584820813832","permuteMapStyles","currentValue","console","log","LoadingIndicator","usePromiseTracker","delay","promiseInProgress","App","handleReload","document","location","reload","handleSwitchTheme","handleSetLive","Date","now","handleToggleCharts","handleCollapseCharts","handleToggleFilters","filtersExpanded","handleCollapseFilters","setCountryFilter","filteredRegions","fetched","length","value","filtered","filterPropValuePair","setTime","unixtime","getLiveData","a","survey","registeredRegions","geoData","features","geodataFeatures","lat","lng","push","properties","Number","geometry","coordinates","interfaceOutGeoJSON","path","open","onClose","classNames","modal","center","isMulti","name","defaultValue","onChange","Boolean","window","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.8dce4d96.chunk.js","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport { NavLink as Link } from 'react-router-dom';\r\nimport './navigation.css';\r\n\r\nexport default class Navigation extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isExpanded: false,\r\n    }\r\n  }\r\n\r\n  handleToggle = () => {\r\n    this.setState({\r\n      isExpanded: !this.state.isExpanded,\r\n    });\r\n  }\r\n\r\n  handleCollapse = () => {\r\n    this.setState({\r\n      isExpanded: false,\r\n    });\r\n  }\r\n\r\n  /*\r\n  componentWillUnmount() {\r\n    const { props, handleCollapse } = this,\r\n          { rootNode } = props;\r\n    rootNode.removeEventListener('click', handleCollapse);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { props, handleCollapse } = this,\r\n          { rootNode } = props;\r\n    rootNode.addEventListener('click', handleCollapse);\r\n  }\r\n  */\r\n\r\n  render() {\r\n    const { state, handleToggle } = this,\r\n          { isExpanded } = state,\r\n          clsNav = `navigation ${isExpanded ? 'expanded' : ''}`,\r\n          clsToggle = `navigation-toggle ${isExpanded ? 'expanded' : ''}`;\r\n    return(\r\n      <Fragment>\r\n        <div className={clsToggle} onClick={handleToggle}>\r\n          <MenuIcon />\r\n        </div>\r\n        <nav className={clsNav}>\r\n          <div className=\"navigation__brand\">Corona<span>hub</span></div>\r\n          <ul>\r\n            <li><HomeIcon /><Link to=\"/\" activeClassName='active'>Home</Link></li>\r\n            <li><TableIcon /><Link to=\"/table\" activeClassName='active'>Table</Link></li>\r\n            <li><SurveyIcon /><Link to=\"/survey\" activeClassName='active'>Survey</Link></li>\r\n            <li><ContactIcon /><Link to=\"/contact\" activeClassName='active'>Contact</Link></li>\r\n            <li><ImprintIcon /><Link to=\"/imprint\" activeClassName='active'>Imprint</Link></li>\r\n          </ul>\r\n        </nav>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst MenuIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\" />\r\n  </svg>\r\n);\r\n\r\nconst HomeIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z\" />\r\n  </svg>\r\n);\r\n\r\nconst TableIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M20 19h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm16-14v22h-24v-22h24zm-2 6h-20v14h20v-14zm-8 8h-4v4h4v-4zm-6-6h-4v4h4v-4z\" />\r\n  </svg>\r\n);\r\n\r\nconst SurveyIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M7 16h10v1h-10v-1zm0-1h10v-1h-10v1zm15-13v22h-20v-22h3c1.229 0 2.18-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1s1-.448 1-1-.448-1-1-1-1 .448-1 1zm9 1h-4l-2 2h-3.898l-2.102-2h-4v18h16v-18zm-13 9h10v-1h-10v1zm0-2h10v-1h-10v1z\" />\r\n  </svg>\r\n);\r\n\r\nconst ContactIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z\" />\r\n  </svg>\r\n);\r\n\r\nconst ImprintIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M20 12.875v5.068c0 2.754-5.789 4.057-9 4.057-3.052 0-9-1.392-9-4.057v-6.294l9 4.863 9-3.637zm-8.083-10.875l-12.917 5.75 12 6.5 11-4.417v7.167h2v-8.25l-12.083-6.75zm13.083 20h-4c.578-1 1-2.5 1-4h2c0 1.516.391 2.859 1 4z\" />\r\n  </svg>\r\n);\r\n","export const circleLayer = {\r\n  id: 'clusters',\r\n  type: 'circle',\r\n  source: 'covid-19',\r\n  paint: {\r\n    'circle-color': [\r\n      'step',\r\n      ['get', 'confirmed'],\r\n      '#03befc', 20,\r\n      '#f1f075', 800,\r\n      '#f28cb1', 5000,\r\n      '#ba1818'\r\n    ],\r\n    'circle-radius': [\r\n      'step',\r\n      ['zoom'], 4, 2, 6, 4, [\r\n        'interpolate',\r\n        ['cubic-bezier', 0, 0.5, 1, 0.5 ],\r\n        ['get', 'confirmed'],\r\n        20,  8,\r\n        5000, 25\r\n      ]\r\n    ],\r\n  }\r\n};\r\n\r\nexport const countLayer = {\r\n  id: 'cluster-count',\r\n  type: 'symbol',\r\n  source: 'covid-19',\r\n  layout: {\r\n    'text-field': ['get', 'confirmed'],\r\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n    'text-size': ['step', ['zoom'], 0, 4, 11],\r\n  }\r\n};\r\n","import React, { useState } from 'react';\r\nimport ReactMapGL, { Source, Layer, NavigationControl } from 'react-map-gl';\r\nimport { circleLayer, countLayer } from './layers-setup';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\n\r\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2lhbm5vdHIiLCJhIjoiY2s3aHFkcDkwMGMzYjNlbzNvMWl4bGFxbyJ9.2p2O5m7aiA6Bn9vjPe7HrQ';\r\n\r\nconst DataMap = ({ data, mapStyle, onClick }) => {\r\n  const [viewport, setViewport] = useState({\r\n    width: '100vw',\r\n    height: '100vh',\r\n    latitude: 45,\r\n    longitude: 10,\r\n    zoom: 4,\r\n  });\r\n\r\n  const mapStyleURI = `mapbox://styles/mapbox/${mapStyle}`;\r\n\r\n  /*\r\n  const clusterParams = {\r\n    cluster: true,\r\n    clusterMaxZoom: 14,\r\n    clusterRadius: 50,\r\n    clusterProperties: { 'cluster_count': ['+', ['case', ['get', 'confirmed'], 1, 0]] },\r\n  }\r\n  */\r\n\r\n  return (\r\n    <ReactMapGL\r\n      {...viewport}\r\n      onViewportChange={setViewport}\r\n      mapboxApiAccessToken={MAPBOX_TOKEN}\r\n      mapStyle={mapStyleURI}\r\n      onClick={onClick}\r\n    >\r\n      <Source id=\"covid-19\" type=\"geojson\" data={data}>\r\n        <Layer {...circleLayer} />\r\n        <Layer {...countLayer} />\r\n      </Source>\r\n      <div style={{position: 'absolute', bottom: '45px', right: '20px'}}>\r\n        <NavigationControl />\r\n      </div>\r\n    </ReactMapGL>\r\n  );\r\n}\r\n\r\nexport default DataMap;\r\n","import React, { Component } from 'react';\r\nimport { Chart } from 'react-chartjs-2';\r\n\r\nexport default class PingChart extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.node = null;\r\n    this.chart = null;\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.chart = new Chart(this.node, {\r\n      type: 'line',\r\n      data: {\r\n        labels: [1, 2, 3, 4, 5, 6],\r\n        datasets: [{\r\n          label: 'Ping Numbers',\r\n          data: [50, 44, 30, 10, 100, 1],\r\n          borderColor: '#333',\r\n          backgroundColor: 'transparent',\r\n          borderWidth: 2\r\n        }]\r\n      },\r\n      options: {\r\n        elements: {\r\n          point: { radius: 0}\r\n        },\r\n        legend: { display: false },\r\n        scales: {\r\n          xAxes: [{ display: false }],\r\n          yAxes: [{\r\n            display: false,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            }\r\n          }]\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  render(){\r\n    return <canvas ref={e => this.node = e} />;\r\n  }\r\n}\r\n","const __sum = (x, y) => x + y;\r\nconst __or = (x, y) => x || y;\r\nconst __ensureArray = (x) => {\r\n  if(typeof x !== 'object') {\r\n    x = [x];\r\n  }\r\n  return x;\r\n}\r\nconst __includesArray = (array, possiblities) => (\r\n  !!array ? possiblities.map(p => array.includes(p)).reduce(__or, false) : true\r\n)\r\n\r\n// B.F. TODO: Add tests!\r\n\r\nconst __condenseDataset = (prop, dataset) => (\r\n  !!prop ? dataset.map(p => p[prop]).reduce(__sum, 0) : 0\r\n);\r\n\r\nexport const condenseDataset = (props, dataset) => {\r\n  if(typeof props === 'object') {\r\n    return props.map(p => __condenseDataset(p, dataset)).reduce(__sum, 0);\r\n  } else {\r\n    return __condenseDataset(props, dataset);\r\n  }\r\n}\r\n\r\nexport const condenseData = (props, data) => {\r\n  const r = {}\r\n  Object.keys(data).forEach(t => {\r\n    r[t] = condenseDataset(props, data[t])\r\n  });\r\n  return r;\r\n}\r\n\r\nconst __filterProps = (props, dataset) => {\r\n  props = __ensureArray(props);\r\n  return dataset.map(p => Object.keys(p)\r\n    .filter(key => props.includes(key))\r\n    .reduce((obj, key) => {\r\n      obj[key] = p[key];\r\n      return obj;\r\n    }, {}));\r\n}\r\n\r\nexport const filterProps = (props, data) => {\r\n  const r = {}\r\n  Object.keys(data).forEach(t => {\r\n    r[t] = __filterProps(props, data[t])\r\n  });\r\n  return r;\r\n}\r\n\r\nconst __filterPropValuePair = (props, values, dataset) => (\r\n  dataset.filter(\r\n    p => __includesArray(values, __ensureArray(props).map(x => p[x]))\r\n  )\r\n);\r\n\r\nexport const filterPropValuePair = (props, values, data) => {\r\n  const r = {}\r\n  Object.keys(data).forEach(t => {\r\n    r[t] = __filterPropValuePair(props, values, data[t])\r\n  });\r\n  return r;\r\n}\r\n","export const pad = (num, size) => {\r\n  let s = num + '';\r\n  while(s.length < size) s = '0' + s;\r\n  return s;\r\n}\r\n\r\nconst __bigIntegerDisplayFormater = new Intl.NumberFormat('en-US');\r\n\r\nexport const bigIntegerDisplay = (number) => (\r\n  __bigIntegerDisplayFormater.format(number)\r\n);\r\n\r\nconst __percentageDisplayFormater = new Intl.NumberFormat(\r\n  'en-IN', { maximumSignificantDigits: 3 }\r\n);\r\n\r\nexport const percentageDisplay = (number) => (\r\n  __percentageDisplayFormater.format(number)\r\n);\r\n\r\nexport const dateString = (date) => (\r\n  `${pad(date.getMonth() + 1, 2)}-${pad(date.getDate(), 2)}-${date.getFullYear()}`\r\n);\r\n\r\nexport const dateDisplay = (date) => (\r\n  `${pad(date.getDate(), 2)}.${pad(date.getMonth() + 1, 2)}.${date.getFullYear()}`\r\n);\r\n","import React, { Fragment } from 'react';\r\nimport DataChart from './data-chart';\r\nimport { condenseData } from '../../utilities/data-mutations';\r\nimport { bigIntegerDisplay, percentageDisplay } from '../../utilities/formatting';\r\nimport './data-panel.css';\r\n\r\nconst DataPanel = (props) => {\r\n  const {\r\n    data,\r\n    currentTime,\r\n    chartsExpanded,\r\n    onToggleFilters,\r\n    onToggleCharts,\r\n  } = props;\r\n  const confirmedValues = condenseData('confirmed', data),\r\n        recoveredValues = condenseData('recovered', data),\r\n        deathsValues = condenseData('deaths', data);\r\n  const condensedDataCurrent = {\r\n    confirmed: confirmedValues[currentTime],\r\n    recovered: recoveredValues[currentTime],\r\n    deaths: deathsValues[currentTime],\r\n  }\r\n  const controlHandlers = { onToggleFilters, onToggleCharts }\r\n  const clsCharts = `charts-container ${chartsExpanded ? 'expanded' : ''}`\r\n  return(\r\n    <Fragment>\r\n      <div className=\"data-panel\">\r\n        <DataPanelTiles {...condensedDataCurrent} />\r\n        <DataPanelControls {...controlHandlers} />\r\n      </div>\r\n      <div className={clsCharts}>\r\n        <DataChart />\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst DataPanelTiles = ({ confirmed, deaths, recovered }) => {\r\n  return(\r\n    <Fragment>\r\n      <DataPanelTile cls=\"confirmed\" heading=\"Confirmed\">\r\n        {bigIntegerDisplay(confirmed)}\r\n      </DataPanelTile>\r\n      <DataPanelTile cls=\"recovered\" heading=\"Recovered\">\r\n        {bigIntegerDisplay(recovered)}\r\n      </DataPanelTile>\r\n      <DataPanelTile cls=\"deaths\" heading=\"Deaths\">\r\n        {bigIntegerDisplay(deaths)}\r\n      </DataPanelTile>\r\n      <DataPanelTile cls=\"computations\" heading=\"Computations\">\r\n        <div>\r\n          Active cases: {bigIntegerDisplay(confirmed - deaths - recovered)}\r\n        </div>\r\n        <div>\r\n          Recover rate: {`${percentageDisplay(recovered / confirmed * 100)}%`}\r\n        </div>\r\n        <div>\r\n          Mortality rate: {`${percentageDisplay(deaths / confirmed * 100)}%`}\r\n        </div>\r\n      </DataPanelTile>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst DataPanelTile = ({ cls, heading, children }) => {\r\n  cls = `data-panel__tile ${cls}`;\r\n  return(\r\n    <div className={cls}>\r\n      <div className=\"data-panel__tile__heading\">{heading}</div>\r\n      <div className=\"data-panel__tile__content\">{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DataPanelControls = ({ onToggleFilters, onToggleCharts }) => {\r\n  return(\r\n    <div className=\"data-panel__controls\">\r\n      <span onClick={onToggleFilters}>\r\n        <FilterIcon />\r\n      </span>\r\n      <span onClick={onToggleCharts}>\r\n        <ArrowLeftIcon />\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n/*\r\nconst LiveDataComputations = ({\r\n  confirmed, deaths, recovered, children\r\n}) => {\r\n  return(\r\n    <div className=\"data-panel-computations__block\">\r\n      <div className=\"data-panel-computations__metric\">\r\n        <span className=\"data-panel-computations__metric-key\">\r\n          Active cases:&nbsp;\r\n        </span>\r\n        <span className=\"data-panel-computations__metric-value\">\r\n          {bigIntegerDisplay(confirmed - deaths - recovered)}\r\n        </span>\r\n      </div>\r\n      <div className=\"data-panel-computations__metric\">\r\n        <span className=\"live-data-panel-computations__metric-key\">\r\n          Recover rate:&nbsp;\r\n        </span>\r\n        <span className=\"data-panel-computations__metric-value\">\r\n          {`${percentageDisplay(recovered / confirmed * 100)}%`}\r\n        </span>\r\n      </div>\r\n      <div className=\"data-panel-computations__metric\">\r\n        <span className=\"data-panel-computations__metric-key\">\r\n          Mortality rate:&nbsp;\r\n        </span>\r\n        <span className=\"data-panel-computations__metric-value\">\r\n          <span className=\"data-panel-computations__fatal\">\r\n            {`${percentageDisplay(deaths / confirmed * 100)}%`}\r\n          </span>\r\n        </span>\r\n      </div>\r\n      <div className=\"data-panel-computations__block-description\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n*/\r\n\r\nconst FilterIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M1 0l9 15.094v5.906l4 3v-8.906l9-15.094h-22zm18.479 2l-2.981 5h-8.996l-2.981-5h14.958z\" />\r\n  </svg>\r\n);\r\n\r\nconst ArrowLeftIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M24 11.871l-5-4.871v3h-19v4h19v3z\" />\r\n  </svg>\r\n);\r\n\r\nexport default DataPanel;\r\n","import React from 'react';\r\nimport './loader.css';\r\n\r\nconst Loader = () => {\r\n  return(\r\n    <div className=\"loader-wrapper\">\r\n      <div className=\"loader-title\">CORONA hub</div>\r\n      <div className=\"loader\">\r\n        {[...Array(25).keys()].map((key) => <div key={key}></div>)}\r\n      </div>\r\n\t  </div>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\n\r\nconst Survey = () => {\r\n  return(\r\n    <div className=\"survey\">\r\n      <h2>Survey</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Survey;\r\n","const __DATA__MOCKUP = {\r\n  1584820500000: [\r\n    {\r\n      province: 'Auenland',\r\n      country: 'Eriador',\r\n      latlng: [51, 9],\r\n      confirmed: 10000,\r\n      recovered: 1,\r\n      deaths: 5000,\r\n      active: 4999,\r\n    },\r\n    {\r\n      province: 'Hyarrostar',\r\n      country: 'Númenor',\r\n      latlng: [52, 10],\r\n      confirmed: 100000,\r\n      recovered: 1000,\r\n      deaths: 60000,\r\n      active: 39000,\r\n    },\r\n    {\r\n      province: 'Gorgoroth',\r\n      country: 'Mordor',\r\n      latlng: [50, 7],\r\n      confirmed: 20,\r\n      recovered: 0,\r\n      deaths: 0,\r\n      active: 20,\r\n    }\r\n  ],\r\n  1584820800000: [\r\n    {\r\n      province: 'Auenland',\r\n      country: 'Eriador',\r\n      latlng: [51, 9],\r\n      confirmed: 20000,\r\n      recovered: 10,\r\n      deaths: 15000,\r\n      active: 9990,\r\n    },\r\n    {\r\n      province: 'Hyarrostar',\r\n      country: 'Númenor',\r\n      latlng: [52, 10],\r\n      confirmed: 100000,\r\n      recovered: 40000,\r\n      deaths: 60000,\r\n      active: 0,\r\n    },\r\n    {\r\n      province: 'Gorgoroth',\r\n      country: 'Mordor',\r\n      latlng: [50, 7],\r\n      confirmed: 50,\r\n      recovered: 10,\r\n      deaths: 20,\r\n      active: 20,\r\n    }\r\n  ],\r\n  1584820813832: [\r\n    {\r\n      province: 'Auenland',\r\n      country: 'Eriador',\r\n      latlng: [51, 9],\r\n      confirmed: 100000,\r\n      recovered: 20,\r\n      deaths: 50000,\r\n      active: 49980,\r\n    },\r\n    {\r\n      province: 'Hyarrostar',\r\n      country: 'Númenor',\r\n      latlng: [52, 10],\r\n      confirmed: 160000,\r\n      recovered: 80000,\r\n      deaths: 65000,\r\n      active: 15000,\r\n    },\r\n    {\r\n      province: 'Gorgoroth',\r\n      country: 'Mordor',\r\n      latlng: [50, 7],\r\n      confirmed: 200,\r\n      recovered: 40,\r\n      deaths: 80,\r\n      active: 80,\r\n    }\r\n  ]\r\n}\r\n\r\nexport default __DATA__MOCKUP;\r\n","import React, { Component, Fragment } from 'react';\nimport { usePromiseTracker, trackPromise } from 'react-promise-tracker';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport Modal from 'react-responsive-modal';\nimport Select from 'react-select';\nimport Navigation from './components/navigation/navigation';\nimport DataMap from './components/data-map/data-map';\nimport DataPanel from './components/data-panel/data-panel';\nimport Loader from './components/loader/loader';\nimport Survey from './components/survey/survery';\nimport { filterPropValuePair } from './utilities/data-mutations';\n//import { shiftDateBack } from './utilities/datetime';\n//import { dateString } from './utilities/formatting';\nimport { interfaceOutGeoJSON } from './utilities/interfaces';\nimport './App.css';\n\nimport __DATA__MOCKUP from './data-mockup';\n\nconst __SATELLITE = 'satellite-v9';\nconst __LIGHTMODE = 'light-v10';\nconst __DARKMODE = 'dark-v10';\nconst __STREETS = 'streets-v11';\n\nconst permuteMapStyles = (currentValue) => {\n  switch(currentValue) {\n    case __SATELLITE:\n      return __LIGHTMODE;\n    case __LIGHTMODE:\n      return __DARKMODE;\n    case __DARKMODE:\n      return __STREETS;\n    case __STREETS:\n      return __SATELLITE;\n    default:\n      console.log(`Sorry, the style '${currentValue}' doesn't exist.`);\n  }\n}\n\nconst LoadingIndicator = () => {\n  const { promiseInProgress } = usePromiseTracker({ delay: 3000 });\n  return(promiseInProgress && <Loader />);  \n}\n\nexport default class App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      mapStyle: __DARKMODE,\n      data: {\n        fetched: {},\n        filtered: {},\n      },\n      survey: {},\n      currentTime: 1584820813832,\n      filteredRegions: [],\n      chartsExpanded: false,\n      filtersExpanded: false,\n    }\n    this.registeredRegions = null;\n  }\n\n  handleReload = () => {\n    document.location.reload();\n  }\n\n  handleSwitchTheme = () => {\n    const { mapStyle } = this.state;\n    this.setState({ mapStyle: permuteMapStyles(mapStyle) });\n  }\n\n  handleSetLive = () => {\n    this.setState({\n      currentTime: Date.now(),\n    });\n  }\n\n  handleToggleCharts = () => {\n    this.setState({\n      chartsExpanded: !this.state.chartsExpanded,\n    });\n  }\n\n  handleCollapseCharts = () => {\n    this.setState({ chartsExpanded: false });\n  }\n\n  handleToggleFilters = () => {\n    this.setState({\n      filtersExpanded: !this.state.filtersExpanded,\n    });\n  }\n\n  handleCollapseFilters = () => {\n    this.setState({ filtersExpanded: false });\n  }\n\n  setCountryFilter = (filteredRegions) => {\n    this.setState({ filteredRegions });\n    let { data } = this.state;\n    const { fetched } = data;\n    if(!!filteredRegions && filteredRegions.length > 0) {\n      filteredRegions = filteredRegions.map(r => r.value);\n      data.filtered = filterPropValuePair(['province', 'country'], filteredRegions, fetched);\n    } else {\n      data.filtered = data.fetched;\n    }\n    this.setState({ data });\n  }\n\n  setTime = (unixtime) => {\n    this.setState({\n      currentTime: unixtime,\n    });\n  }\n\n  getLiveData = async () => {\n    // TODO: fetch from backend here\n    return __DATA__MOCKUP;\n  }\n\n  async componentDidMount() {\n    const data = await this.getLiveData();\n    this.setState({\n      data: {\n        fetched: data,\n        filtered: data,\n      }\n    });\n    // TODO: get from endpoint '/getAllRegisteredRegions'\n    this.registeredRegions = [\n      { value: 'Auenland', label: 'Auenland' },\n      { value: 'Eriador', label: 'Eriador' },\n      { value: 'Hyarrostar', label: 'Hyarrostar' },\n      { value: 'Númenor', label: 'Númenor' },\n      { value: 'Gorgoroth', label: 'Gorgoroth' },\n      { value: 'Mordor', label: 'Mordor' },\n    ]\n  }\n\n  render(){\n    const {\n      state,\n      registeredRegions,\n      setCountryFilter,\n      handleToggleCharts,\n      handleCollapseCharts,\n      handleToggleFilters,\n      handleCollapseFilters,\n    } = this;\n    const {\n      mapStyle,\n      data: {filtered},\n      //survey,\n      currentTime,\n      filteredRegions,\n      chartsExpanded,\n      filtersExpanded,\n    } = state;\n\n    const geoData = interfaceOutGeoJSON(filtered[currentTime]);\n\n    return(\n      <Router>\n        <div className=\"app\">\n          <LoadingIndicator />\n          <Navigation />\n          <Switch>\n            <Route path=\"/\">\n              <Modal\n                open={filtersExpanded}\n                onClose={handleCollapseFilters}\n                classNames={{ modal: 'modal-filters' }}\n                center\n              >\n                <h2>Data filters</h2>\n                <Select\n                  isMulti\n                  name=\"countries\"\n                  options={registeredRegions}\n                  defaultValue={filteredRegions}\n                  onChange={setCountryFilter}\n                />\n              </Modal>\n              <DataPanel\n                data={filtered}\n                currentTime={currentTime}\n                chartsExpanded={chartsExpanded}\n                onToggleFilters={handleToggleFilters}\n                onToggleCharts={handleToggleCharts}\n              />\n              {geoData && <DataMap\n                data={geoData}\n                mapStyle={mapStyle}\n                onClick={handleCollapseCharts}\n              />}\n            </Route>\n            <Route path=\"/table\">\n              <Fragment />\n            </Route>\n            <Route path=\"/survey\">\n              <Survey />\n            </Route>\n            <Route path=\"/contact\">\n              <Fragment />\n            </Route>\n            <Route path=\"/imprint\">\n              <Fragment />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n","export const interfaceOutGeoJSON = (dataset) => {\r\n  let geoData = {\r\n    type: 'FeatureCollection',\r\n    features: [],\r\n  }\r\n  if(dataset) {\r\n    let geodataFeatures = [];\r\n    for(const point of dataset){\r\n      const {\r\n        province,\r\n        country,\r\n        confirmed,\r\n        recovered,\r\n        deaths,\r\n        latlng,\r\n      } = point;\r\n      const [ lat, lng ] = latlng;\r\n      geodataFeatures.push({\r\n        type: 'Feature',\r\n        properties: {\r\n          province,\r\n          country,\r\n          confirmed: Number(confirmed),\r\n          recovered: Number(recovered),\r\n          deaths: Number(deaths),\r\n        },\r\n        geometry: {\r\n          type: 'Point',\r\n          coordinates: [Number(lng), Number(lat)],\r\n        }\r\n      });\r\n    }\r\n    geoData.features = geodataFeatures;\r\n  }\r\n  return geoData;\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}