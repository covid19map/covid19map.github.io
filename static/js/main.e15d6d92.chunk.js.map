{"version":3,"sources":["components/data-map/layers-setup.js","components/data-map/data-map.js","components/live-data-panel/live-data-panel.js","components/controls/controls.js","utilities/formatting.js","components/timeline/timeline.js","components/loader/loader.js","utilities/is-local.js","utilities/parse-csv.js","utilities/datetime.js","App.js","utilities/interfaces.js","serviceWorker.js","index.js"],"names":["circleLayer","id","type","source","paint","countLayer","layout","DataMap","data","mapStyle","useState","width","height","latitude","longitude","zoom","viewport","setViewport","mapStyleURI","onViewportChange","mapboxApiAccessToken","style","position","bottom","left","LiveDataPanel","confirmed","deaths","recovered","className","Controls","props","onMouseMove","e","target","clientX","clientY","tooltipLabel","dataset","label","setState","state","this","handleReload","handleSetLive","handleSwitchTheme","handleExpandTimeline","styTooltip","top","padding","sty","content","onClick","icon","Component","ControlsContainer","children","ControlsTooltip","ControlsIcon","viewBox","d","ControlsButton","data-label","ReloadIcon","LayersIcon","EyeIcon","TimelineIcon","fillRule","clipRule","pad","num","size","s","length","Object","defineProperty","Array","prototype","value","sb","f","i","o","concat","call","sort","a","b","len","sortBy","TimelineWrapper","cls","TimelineNode","timestamp","currentTimestamp","clickParams","pointerEvents","opacity","date","Date","getDate","getMonth","getFullYear","dateDisplay","CloseButton","params","Timeline","timestamps","expanded","selectedDate","handleCollapseTimeline","handleTimeSelect","map","t","key","Loader","keys","isLocal","hostname","window","location","parseCSV","str","arr","quote","row","col","c","cc","nc","shiftDateBack","setDate","__PROXY","LoadingIndicator","usePromiseTracker","delay","promiseInProgress","App","document","reload","timelineExpanded","console","log","getLiveData","headers","Headers","urlTotal","urlCountries","init","method","mode","cache","requestTotal","Request","requestCountries","trackPromise","fetch","responseTotal","responseCountries","json","dataTotal","dataCountries","error","dataLive","total","countries","getArchivedData","url","request","response","text","prevState","dataArchived","String","earliestDate","currentDate","getTime","geoData","features","geodataFeatures","point","provinceState","countryRegion","lastUpdate","lat","long","push","properties","region","Number","geometry","coordinates","interfaceCSSEcurrentGeoJSON","interfaceCSSEdailyGeoJSON","casesTotal","controlsParams","timelineParams","Boolean","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.e15d6d92.chunk.js","sourcesContent":["export const circleLayer = {\r\n  id: 'clusters',\r\n  type: 'circle',\r\n  source: 'covid-19',\r\n  paint: {\r\n    'circle-color': [\r\n      'step',\r\n      ['get', 'confirmed'],\r\n      '#03befc', 20,\r\n      '#f1f075', 800,\r\n      '#f28cb1', 5000,\r\n      '#ba1818'\r\n    ],\r\n    'circle-radius': [\r\n      'step',\r\n      ['zoom'], 4, 2, 6, 4, [\r\n        'interpolate',\r\n        ['cubic-bezier', 0, 0.5, 1, 0.5 ],\r\n        ['get', 'confirmed'],\r\n        20,  8,\r\n        5000, 25\r\n      ]\r\n    ],\r\n  }\r\n};\r\n\r\nexport const countLayer = {\r\n  id: 'cluster-count',\r\n  type: 'symbol',\r\n  source: 'covid-19',\r\n  layout: {\r\n    'text-field': ['get', 'confirmed'],\r\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n    'text-size': ['step', ['zoom'], 0, 4, 11],\r\n  }\r\n};\r\n","import React, { useState } from 'react';\r\nimport ReactMapGL, { Source, Layer, NavigationControl } from 'react-map-gl';\r\nimport { circleLayer, countLayer } from './layers-setup';\r\n\r\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2lhbm5vdHIiLCJhIjoiY2s3aHFkcDkwMGMzYjNlbzNvMWl4bGFxbyJ9.2p2O5m7aiA6Bn9vjPe7HrQ';\r\n\r\nconst DataMap = ({ data, mapStyle }) => {\r\n  const [viewport, setViewport] = useState({\r\n    width: '100vw',\r\n    height: '100vh',\r\n    latitude: 45,\r\n    longitude: 10,\r\n    zoom: 4,\r\n  });\r\n\r\n  const mapStyleURI = `mapbox://styles/mapbox/${mapStyle}`;\r\n\r\n  /*\r\n  const clusterParams = {\r\n    cluster: true,\r\n    clusterMaxZoom: 14,\r\n    clusterRadius: 50,\r\n    clusterProperties: { 'cluster_count': ['+', ['case', ['get', 'confirmed'], 1, 0]] },\r\n  }\r\n  */\r\n\r\n  return (\r\n    <ReactMapGL\r\n      {...viewport}\r\n      onViewportChange={setViewport}\r\n      mapboxApiAccessToken={MAPBOX_TOKEN}\r\n      mapStyle={mapStyleURI}\r\n    >\r\n      <Source id=\"covid-19\" type=\"geojson\" data={data}>\r\n        <Layer {...circleLayer} />\r\n        <Layer {...countLayer} />\r\n      </Source>\r\n      <div style={{position: 'absolute', bottom: '40px', left: '20px'}}>\r\n        <NavigationControl />\r\n      </div>\r\n    </ReactMapGL>\r\n  );\r\n}\r\n\r\nexport default DataMap;\r\n","import React from 'react';\r\nimport './live-data-panel.css';\r\n\r\nconst LiveDataPanel = ({ data }) => {\r\n  const { confirmed, deaths, recovered } = data;\r\n  return(\r\n    <div className=\"live-data-panel\">\r\n      <div className=\"live-data-panel__sign\">\r\n        <div className=\"blinking-light\"></div>\r\n        Live Data\r\n      </div>\r\n      <div className=\"live-data-panel__tile confirmed\">\r\n        <div className=\"live-data-panel__key\">Confirmed</div>\r\n        <div className=\"live-data-panel__value\">{confirmed}</div>\r\n      </div>\r\n      <div className=\"live-data-panel__tile deaths\">\r\n        <div className=\"live-data-panel__key\">Deaths</div>\r\n        <div className=\"live-data-panel__value\">{deaths}</div>\r\n      </div>\r\n      <div className=\"live-data-panel__tile recovered\">\r\n        <div className=\"live-data-panel__key\">Recovered</div>\r\n        <div className=\"live-data-panel__value\">{recovered}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LiveDataPanel;\r\n","import React, { Component, Fragment } from 'react';\r\nimport './controls.css';\r\n\r\nexport default class Controls extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      clientX: 0,\r\n      clientY: 0,\r\n      tooltipLabel: '',\r\n    }\r\n  }\r\n\r\n  onMouseMove = (e) => {\r\n    const { target, clientX, clientY } = e;\r\n    const tooltipLabel = target.dataset.label;\r\n    this.setState({ tooltipLabel, clientX, clientY });\r\n  }\r\n\r\n  render() {\r\n    const { props, state, onMouseMove } = this;\r\n    const {\r\n      handleReload,\r\n      handleSetLive,\r\n      handleSwitchTheme,\r\n      handleExpandTimeline,\r\n    } = props;\r\n    const { tooltipLabel, clientX, clientY } = state;\r\n    const styTooltip = {\r\n      top: clientY + 8,\r\n      left: clientX + 12,\r\n      padding: tooltipLabel ? '6px' : '0',\r\n    }\r\n    return(\r\n      <Fragment>\r\n        <ControlsTooltip sty={styTooltip} content={tooltipLabel} />\r\n        <ControlsContainer onMouseMove={onMouseMove}>\r\n          <ControlsIcon />\r\n          <ControlsButton label=\"Reload\" onClick={handleReload} icon={<ReloadIcon />} />\r\n          <ControlsButton label=\"Switch Theme\" onClick={handleSwitchTheme} icon={<LayersIcon />} />\r\n          <ControlsButton label=\"Back to Live Data\" onClick={handleSetLive} icon={<EyeIcon />} />\r\n          <ControlsButton label=\"Archived Data\" onClick={handleExpandTimeline} icon={<TimelineIcon />} />\r\n        </ControlsContainer>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst ControlsContainer = ({ onMouseMove, children }) => (\r\n  <div className=\"controls\" onMouseMove={onMouseMove}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst ControlsTooltip = ({ sty, content }) => (\r\n  <div className=\"controls-tooltip\" style={sty}>{content}</div>\r\n);\r\n\r\nconst ControlsIcon = () => (\r\n  <div className=\"controls__icon\">\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\" />\r\n    </svg>\r\n  </div>\r\n);\r\n\r\nconst ControlsButton = ({ label, onClick, icon }) => (\r\n  <div className=\"controls__button\" data-label={label} onClick={onClick}>\r\n    {icon}\r\n  </div>\r\n);\r\n\r\nconst ReloadIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M20.944 12.979c-.489 4.509-4.306 8.021-8.944 8.021-2.698 0-5.112-1.194-6.763-3.075l1.245-1.633c1.283 1.645 3.276 2.708 5.518 2.708 3.526 0 6.444-2.624 6.923-6.021h-2.923l4-5.25 4 5.25h-3.056zm-15.864-1.979c.487-3.387 3.4-6 6.92-6 2.237 0 4.228 1.059 5.51 2.698l1.244-1.632c-1.65-1.876-4.061-3.066-6.754-3.066-4.632 0-8.443 3.501-8.941 8h-3.059l4 5.25 4-5.25h-2.92z\" />\r\n  </svg>\r\n);\r\n\r\nconst LayersIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M21.698 10.658l2.302 1.342-12.002 7-11.998-7 2.301-1.342 9.697 5.658 9.7-5.658zm-9.7 10.657l-9.697-5.658-2.301 1.343 11.998 7 12.002-7-2.302-1.342-9.7 5.657zm12.002-14.315l-12.002-7-11.998 7 11.998 7 12.002-7z\" />\r\n  </svg>\r\n);\r\n\r\nconst EyeIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M12.015 7c4.751 0 8.063 3.012 9.504 4.636-1.401 1.837-4.713 5.364-9.504 5.364-4.42 0-7.93-3.536-9.478-5.407 1.493-1.647 4.817-4.593 9.478-4.593zm0-2c-7.569 0-12.015 6.551-12.015 6.551s4.835 7.449 12.015 7.449c7.733 0 11.985-7.449 11.985-7.449s-4.291-6.551-11.985-6.551zm-.015 3c-2.21 0-4 1.791-4 4s1.79 4 4 4c2.209 0 4-1.791 4-4s-1.791-4-4-4zm-.004 3.999c-.564.564-1.479.564-2.044 0s-.565-1.48 0-2.044c.564-.564 1.479-.564 2.044 0s.565 1.479 0 2.044z\" />\r\n  </svg>\r\n);\r\n\r\nconst TimelineIcon = () => (\r\n  <svg width=\"24\" height=\"24\" fillRule=\"evenodd\" clipRule=\"evenodd\">\r\n    <path d=\"M5.829 6c-.412 1.165-1.524 2-2.829 2-1.656 0-3-1.344-3-3s1.344-3 3-3c1.305 0 2.417.835 2.829 2h13.671c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5h-4.671c-.412 1.165-1.524 2-2.829 2-1.305 0-2.417-.835-2.829-2h-4.671c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5h13.671c.412-1.165 1.524-2 2.829-2 1.656 0 3 1.344 3 3s-1.344 3-3 3c-1.305 0-2.417-.835-2.829-2h-13.671c-2.484 0-4.5-2.016-4.5-4.5s2.016-4.5 4.5-4.5h4.671c.412-1.165 1.524-2 2.829-2 1.305 0 2.417.835 2.829 2h4.671c1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5h-13.671zm6.171 5c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z\" />\r\n  </svg>\r\n);\r\n","export const pad = (num, size) => {\r\n  let s = num + '';\r\n  while(s.length < size) s = '0' + s;\r\n  return s;\r\n}\r\n\r\nexport const dateString = (date) => (\r\n  `${pad(date.getMonth() + 1, 2)}-${pad(date.getDate(), 2)}-${date.getFullYear()}`\r\n);\r\n\r\nexport const dateDisplay = (date) => (\r\n  `${pad(date.getDate(), 2)}.${pad(date.getMonth() + 1, 2)}.${date.getFullYear()}`\r\n);\r\n","import React from 'react';\r\nimport { dateDisplay } from '../../utilities/formatting';\r\nimport './timeline.css';\r\n\r\n//Define a custom non-enumerable `sortBy` function using a Schwartzian transform:\r\n(function(){\r\n  if (typeof Object.defineProperty === 'function'){\r\n    try{Object.defineProperty(Array.prototype,'sortBy',{value:sb}); }catch(e){}\r\n  }\r\n  if (!Array.prototype.sortBy) Array.prototype.sortBy = sb;\r\n\r\n  function sb(f){\r\n    for (var i=this.length;i;){\r\n      var o = this[--i];\r\n      this[i] = [].concat(f.call(o,o,i),o);\r\n    }\r\n    this.sort(function(a,b){\r\n      for (var i=0,len=a.length;i<len;++i){\r\n        if (a[i]!=b[i]) return a[i]<b[i]?-1:1;\r\n      }\r\n      return 0;\r\n    });\r\n    for (var i=this.length;i;){\r\n      this[--i]=this[i][this[i].length-1];\r\n    }\r\n    return this;\r\n  }\r\n})();\r\n\r\nconst Timeline = ({\r\n  timestamps,\r\n  expanded,\r\n  selectedDate,\r\n  handleCollapseTimeline,\r\n  handleTimeSelect,\r\n}) => {\r\n  const cls = `timeline ${expanded ? 'expanded' : ''}`;\r\n  return(\r\n    <TimelineWrapper cls={cls}>\r\n      <CloseButton onClick={handleCollapseTimeline} />\r\n      {timestamps.sortBy((d) => (new Date(d))).map((t) => (\r\n        <TimelineNode\r\n          key={t}\r\n          timestamp={t}\r\n          currentTimestamp={selectedDate}\r\n          onClick={handleTimeSelect}\r\n        />\r\n      ))}\r\n    </TimelineWrapper>\r\n  );\r\n}\r\n\r\nconst TimelineWrapper = ({ cls, children }) => {\r\n  return(\r\n    <div className={cls}>{children}</div>\r\n  );\r\n}\r\n\r\nconst TimelineNode = ({\r\n  timestamp, currentTimestamp, onClick\r\n}) => {\r\n  const sty = {\r\n    pointerEvents: 'none',\r\n    opacity: '.5',\r\n  }\r\n  const clickParams = {\r\n    onClick,\r\n    'data-timestamp': timestamp,\r\n    style: timestamp === currentTimestamp ? sty : {},\r\n  }\r\n  const date = new Date(timestamp);\r\n  return(\r\n    <div className=\"timeline__node\" {...clickParams}>\r\n      <div className=\"timeline__node__circle\" {...clickParams}></div>\r\n      <div className=\"timeline__node__timestamp\" {...clickParams}>\r\n        {dateDisplay(date)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst CloseButton = ({ onClick }) => {\r\n  const params = {\r\n    className: 'close-button',\r\n    onClick,\r\n  }\r\n  return(\r\n    <div {...params}>\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n        <path d=\"M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Timeline;\r\n","import React from 'react';\r\nimport './loader.css';\r\n\r\nconst Loader = () => {\r\n  return(\r\n    <div className=\"loader-wrapper\">\r\n      <div className=\"loader-title\">COVID-19 Map</div>\r\n      <div className=\"loader\">\r\n        {[...Array(25).keys()].map((key) => <div key={key}></div>)}\r\n      </div>\r\n\t  </div>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","const isLocal = () => {\r\n  const { hostname } = window.location;\r\n  return hostname === \"localhost\" || hostname === \"127.0.0.1\";\r\n}\r\n\r\nexport default isLocal;\r\n","const parseCSV = (str) => {\r\n  var arr = [];\r\n  var quote = false;  // true means we're inside a quoted field\r\n  // iterate over each character, keep track of current row and column (of the returned array)\r\n  for (var row = 0, col = 0, c = 0; c < str.length; c++) {\r\n    var cc = str[c], nc = str[c+1];        // current character, next character\r\n    arr[row] = arr[row] || [];             // create a new row if necessary\r\n    arr[row][col] = arr[row][col] || '';   // create a new column (start with empty string) if necessary\r\n    // If the current character is a quotation mark, and we're inside a\r\n    // quoted field, and the next character is also a quotation mark,\r\n    // add a quotation mark to the current column and skip the next character\r\n    if (cc === '\"' && quote && nc === '\"') { arr[row][col] += cc; ++c; continue; }  \r\n    // If it's just one quotation mark, begin/end quoted field\r\n    if (cc === '\"') { quote = !quote; continue; }\r\n    // If it's a comma and we're not in a quoted field, move on to the next column\r\n    if (cc === ',' && !quote) { ++col; continue; }\r\n    // If it's a newline (CRLF) and we're not in a quoted field, skip the next character\r\n    // and move on to the next row and move to column 0 of that new row\r\n    if (cc === '\\r' && nc === '\\n' && !quote) { ++row; col = 0; ++c; continue; }\r\n    // If it's a newline (LF or CR) and we're not in a quoted field,\r\n    // move on to the next row and move to column 0 of that new row\r\n    if (cc === '\\n' && !quote) { ++row; col = 0; continue; }\r\n    if (cc === '\\r' && !quote) { ++row; col = 0; continue; }\r\n    // Otherwise, append the current character to the current column\r\n    arr[row][col] += cc;\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport default parseCSV;\r\n","export const shiftDateBack = (date) => {\r\n  date.setDate(date.getDate() - 1);\r\n}\r\n","import React, { Component } from 'react';\nimport { usePromiseTracker, trackPromise } from 'react-promise-tracker';\nimport DataMap from './components/data-map/data-map';\nimport LiveDataPanel from './components/live-data-panel/live-data-panel';\nimport Controls from './components/controls/controls';\nimport Timeline from './components/timeline/timeline';\nimport Loader from './components/loader/loader';\nimport isLocal from './utilities/is-local';\nimport parseCSV from './utilities/parse-csv';\nimport { shiftDateBack } from './utilities/datetime';\nimport { dateString } from './utilities/formatting';\nimport {\n  interfaceCSSEcurrentGeoJSON,\n  interfaceCSSEdailyGeoJSON,\n} from './utilities/interfaces';\n\nconst __PROXY = 'https://cors-anywhere.herokuapp.com/';\nconst __SATELLITE = 'satellite-v9';\nconst __LIGHTMODE = 'light-v10';\nconst __DARKMODE = 'dark-v10';\nconst __STREETS = 'streets-v11';\n\nconst LoadingIndicator = () => {\n  const { promiseInProgress } = usePromiseTracker({ delay: 2500 });\n  return(promiseInProgress && <Loader />);  \n}\n\nexport default class App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      selectedDate: 'current',\n      dataArchived: {},\n      dataLive: {\n        total: {\n          confirmed: { value: 0 },\n          deaths: { value: 0 },\n          recovered: { value: 0 },\n        },\n        countries: [],\n      },\n      mapStyle: __DARKMODE,\n      timelineExpanded: false,\n    }\n  }\n\n  handleReload = () => {\n    document.location.reload();\n  }\n\n  handleSetLive = () => {\n    this.setState({\n      selectedDate: 'current',\n      timelineExpanded: false,\n    });\n  }\n\n  handleSwitchTheme = () => {\n    let { mapStyle } = this.state;\n    switch(mapStyle) {\n      case __SATELLITE:\n        mapStyle = __LIGHTMODE;\n        break;\n      case __LIGHTMODE:\n        mapStyle = __DARKMODE;\n        break;\n      case __DARKMODE:\n        mapStyle = __STREETS;\n        break;\n      case __STREETS:\n        mapStyle = __SATELLITE;\n        break;\n      default:\n        console.log(\"Sorry, the style \" + mapStyle + \" doesn't exist.\");\n    }\n    this.setState({ mapStyle });\n  }\n\n  handleExpandTimeline = () => {\n    this.setState({ timelineExpanded: true });\n  }\n\n  handleCollapseTimeline = () => {\n    this.setState({ timelineExpanded: false });\n  }\n\n  handleTimeSelect = (e) => {\n    const { timestamp } = e.target.dataset;\n    this.setState({ selectedDate: timestamp });\n  }\n\n  getLiveData = async () => {\n    const headers = new Headers({\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n    });\n    const method = 'GET',\n          mode = 'cors',\n          type = 'json',\n          cache = 'default',\n          urlTotal = isLocal() ?\n            './data-fallback/live/covid19-total.json' :\n            `${__PROXY}https://covid19.mathdro.id/api`,\n          urlCountries = isLocal() ?\n            './data-fallback/live/covid19-countries.json' :\n            `${__PROXY}https://covid19.mathdro.id/api/deaths`;\n    const init = {\n      headers,\n      method,\n      mode,\n      type,\n      cache,\n    }\n    const requestTotal = new Request(urlTotal, init);\n    const requestCountries = new Request(urlCountries, init);\n    const responseTotal = await trackPromise(fetch(requestTotal, init));\n    const responseCountries = await trackPromise(fetch(requestCountries, init));\n    let dataTotal, dataCountries;\n    try {\n      dataTotal = await responseTotal.json();\n      dataCountries = await responseCountries.json();\n    } catch(e) {\n      console.error(e);\n    }\n    if(!!dataTotal && !!dataCountries) {\n      this.setState({\n        dataLive: {\n          total: dataTotal,\n          countries: dataCountries,\n        },\n      });\n    }\n  }\n\n  getArchivedData = async (date) => {\n    const headers = new Headers(),\n          method = 'GET',\n          mode = 'cors',\n          type = 'text/csv',\n          cache = 'default',\n          url = `./data/archived/${date}.csv`;\n            //`${__PROXY}https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/${date}.csv`;\n    const init = {\n      headers,\n      method,\n      mode,\n      type,\n      cache,\n    }\n    const request = new Request(url, init);\n    const response = await trackPromise(fetch(request, init));\n    let data = null;\n    try {\n      data = await response.text();\n    } catch(e) {\n      console.error(e);\n    }\n    if(!!data) {\n      this.setState((prevState) => ({\n        dataArchived: {\n          ...prevState.dataArchived,\n          [date]: parseCSV(String(data)),\n        },\n      }));\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      //02-29-2020 until 01-22-2020 wrong or missing geometric info\n      const earliestDate = new Date('03-01-2020');\n      let currentDate = new Date();\n      shiftDateBack(currentDate);\n      while(currentDate.getTime() >= earliestDate.getTime()) {\n        this.getArchivedData(dateString(currentDate));\n        shiftDateBack(currentDate);\n      }\n      this.getLiveData();\n      // Refresh the live data every 10 seconds (inefficient)\n      /*\n      setInterval(async () => {\n        this.getLiveData();\n      }, 10000);\n      */\n    } catch(e) {\n      console.error(e);\n    }\n  }\n\n  render(){\n    const {\n      handleReload,\n      handleSetLive,\n      handleSwitchTheme,\n      handleExpandTimeline,\n      handleCollapseTimeline,\n      handleTimeSelect,\n      state,\n    } = this;\n    const {\n      selectedDate,\n      dataLive,\n      dataArchived,\n      mapStyle,\n      timelineExpanded,\n    } = state;\n\n    let geoData;\n    if(selectedDate === 'current') {\n      geoData = interfaceCSSEcurrentGeoJSON(dataLive.countries);\n    } else {\n      geoData = interfaceCSSEdailyGeoJSON(dataArchived[selectedDate]);\n    }\n\n    const { confirmed, deaths, recovered } = dataLive.total;\n    const casesTotal = {\n      confirmed: confirmed.value,\n      deaths: deaths.value,\n      recovered: recovered.value,\n    }\n\n    const controlsParams = {\n      handleReload,\n      handleSwitchTheme,\n      handleSetLive,\n      handleExpandTimeline,\n    }\n\n    const timelineParams = {\n      timestamps: Object.keys(dataArchived),\n      expanded: timelineExpanded,\n      selectedDate,\n      handleCollapseTimeline,\n      handleTimeSelect,\n    }\n\n    return(\n      <div className=\"app\">\n        <LoadingIndicator />\n        <Controls {...controlsParams} />\n        <Timeline {...timelineParams} />\n        {casesTotal && <LiveDataPanel data={casesTotal} />}\n        {geoData && <DataMap data={geoData} mapStyle={mapStyle} />}\n      </div>\n    );\n  }\n}\n","export const interfaceCSSEdailyGeoJSON = (dataset) => {\r\n  let geoData = {\r\n    type: 'FeatureCollection',\r\n    features: [],\r\n  }\r\n  if(dataset) {\r\n    let geodataFeatures = [];\r\n    for(const row of dataset){\r\n      if(row[0] !== 'Province/State') {\r\n        const date = new Date(row[2]);\r\n        geodataFeatures.push({\r\n          type: 'Feature',\r\n          properties: {\r\n            state: row[0],\r\n            region: row[1],\r\n            timestamp: Number(date.getTime()),\r\n            confirmed: Number(row[3]),\r\n            deaths: Number(row[4]),\r\n            recovered: Number(row[5]),\r\n          },\r\n          geometry: {\r\n            type: 'Point',\r\n            coordinates: [Number(row[7]), Number(row[6])],\r\n          }\r\n        });\r\n      }\r\n      geoData.features = geodataFeatures;\r\n    }\r\n    return geoData;\r\n  }\r\n}\r\n\r\nexport const interfaceCSSEcurrentGeoJSON = (dataset) => {\r\n  let geoData = {\r\n    type: 'FeatureCollection',\r\n    features: [],\r\n  }\r\n  if(dataset) {\r\n    let geodataFeatures = [];\r\n    for(const point of dataset){\r\n      const {\r\n        provinceState,\r\n        countryRegion,\r\n        lastUpdate,\r\n        confirmed,\r\n        deaths,\r\n        recovered,\r\n        lat,\r\n        long,\r\n      } = point;\r\n      geodataFeatures.push({\r\n        type: 'Feature',\r\n        properties: {\r\n          state: provinceState,\r\n          region: countryRegion,\r\n          timestamp: Number(lastUpdate),\r\n          confirmed: Number(confirmed),\r\n          deaths: Number(deaths),\r\n          recovered: Number(recovered),\r\n        },\r\n        geometry: {\r\n          type: 'Point',\r\n          coordinates: [Number(long), Number(lat)],\r\n        }\r\n      });\r\n      geoData.features = geodataFeatures;\r\n    }\r\n    return geoData;\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}