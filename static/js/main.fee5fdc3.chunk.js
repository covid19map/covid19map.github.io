(this["webpackJsonpcorona-cub"]=this["webpackJsonpcorona-cub"]||[]).push([[0],{44:function(e,t,a){e.exports=a(64)},49:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),o=a(13),c=a.n(o),l=(a(49),a(17)),i=a.n(l),s=a(25),d=a(31),u=a(32),m=a(41),f=a(33),h=a(42),v=a(34),p=a(39),g=a(38),E=a(20),y=a(16),b={id:"clusters",type:"circle",source:"covid-19",paint:{"circle-color":["step",["get","confirmed"],"#03befc",20,"#f1f075",800,"#f28cb1",5e3,"#ba1818"],"circle-radius":["step",["zoom"],4,2,6,4,["interpolate",["cubic-bezier",0,.5,1,.5],["get","confirmed"],20,8,5e3,25]]}},x={id:"cluster-count",type:"symbol",source:"covid-19",layout:{"text-field":["get","confirmed"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["zoom"],0,4,11]}},C=(a(60),function(e){var t=e.data,a=e.mapStyle,o=e.onClick,c=Object(r.useState)({width:"100vw",height:"100vh",latitude:45,longitude:10,zoom:4}),l=Object(E.a)(c,2),i=l[0],s=l[1],d="mapbox://styles/mapbox/".concat(a);return n.a.createElement(y.d,Object.assign({},i,{onViewportChange:s,mapboxApiAccessToken:"pk.eyJ1IjoiZ2lhbm5vdHIiLCJhIjoiY2s3aHFkcDkwMGMzYjNlbzNvMWl4bGFxbyJ9.2p2O5m7aiA6Bn9vjPe7HrQ",mapStyle:d,onClick:o}),n.a.createElement(y.c,{id:"covid-19",type:"geojson",data:t},n.a.createElement(y.a,b),n.a.createElement(y.a,x)),n.a.createElement("div",{style:{position:"absolute",bottom:"40px",right:"20px"}},n.a.createElement(y.b,null)))}),w=function(e,t){return e+t},N=function(e,t){return e||t},k=function(e){return"object"!==typeof e&&(e=[e]),e},S=function(e,t){return e?t.map((function(t){return t[e]})).reduce(w,0):0},j=function(e,t){var a={};return Object.keys(t).forEach((function(r){a[r]=function(e,t){return"object"===typeof e?e.map((function(e){return S(e,t)})).reduce(w,0):S(e,t)}(e,t[r])})),a},T=function(e,t,a){return a.filter((function(a){return r=t,n=k(e).map((function(e){return a[e]})),!r||n.map((function(e){return r.includes(e)})).reduce(N,!1);var r,n}))},F=new Intl.NumberFormat("en-US"),O=function(e){return F.format(e)},M=new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}),_=function(e){return M.format(e)},A=(a(61),function(e){var t=e.confirmed,a=e.deaths,o=e.recovered;return n.a.createElement(r.Fragment,null,n.a.createElement(z,{cls:"confirmed",heading:"Confirmed"},O(t)),n.a.createElement(z,{cls:"recovered",heading:"Recovered"},O(o)),n.a.createElement(z,{cls:"deaths",heading:"Deaths"},O(a)),n.a.createElement(z,{cls:"computations",heading:"Computations"},n.a.createElement("div",null,"Active cases: ",O(t-a-o)),n.a.createElement("div",null,"Recover rate: ","".concat(_(o/t*100),"%")),n.a.createElement("div",null,"Mortality rate: ","".concat(_(a/t*100),"%"))))}),z=function(e){var t=e.cls,a=e.heading,r=e.children;return t="data-panel__tile ".concat(t),n.a.createElement("div",{className:t},n.a.createElement("div",{className:"data-panel__tile__heading"},a),n.a.createElement("div",{className:"data-panel__tile__content"},r))},D=function(e){var t=e.onToggleFilters,a=e.onToggleCharts;return n.a.createElement("div",{className:"data-panel__controls"},n.a.createElement("span",{onClick:t},n.a.createElement(I,null)),n.a.createElement("span",{onClick:a},n.a.createElement(R,null)))},I=function(){return n.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},n.a.createElement("path",{d:"M1 0l9 15.094v5.906l4 3v-8.906l9-15.094h-22zm18.479 2l-2.981 5h-8.996l-2.981-5h14.958z"}))},R=function(){return n.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},n.a.createElement("path",{d:"M24 11.871l-5-4.871v3h-19v4h19v3z"}))},H=function(e){var t=e.data,a=e.currentTime,o=e.chartsExpanded,c=e.onToggleFilters,l=e.onToggleCharts,i=j("confirmed",t),s=j("recovered",t),d=j("deaths",t),u={confirmed:i[a],recovered:s[a],deaths:d[a]},m={onToggleFilters:c,onToggleCharts:l},f="charts-container ".concat(o?"expanded":"");return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"data-panel"},n.a.createElement(A,u),n.a.createElement(D,m)),n.a.createElement("div",{className:f}))},G=a(40),B=(a(62),function(){return n.a.createElement("div",{className:"loader-wrapper"},n.a.createElement("div",{className:"loader-title"},"COVID-19 Map"),n.a.createElement("div",{className:"loader"},Object(G.a)(Array(25).keys()).map((function(e){return n.a.createElement("div",{key:e})}))))}),J=(a(63),{15848205e5:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:1e4,recovered:1,deaths:5e3,active:4999},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:1e5,recovered:1e3,deaths:6e4,active:39e3},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:20,recovered:0,deaths:0,active:20}],15848208e5:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:2e4,recovered:10,deaths:15e3,active:9990},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:1e5,recovered:4e4,deaths:6e4,active:0},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:50,recovered:10,deaths:20,active:20}],1584820813832:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:1e5,recovered:20,deaths:5e4,active:49980},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:16e4,recovered:8e4,deaths:65e3,active:15e3},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:200,recovered:40,deaths:80,active:80}]}),P=function(e){switch(e){case"satellite-v9":return"light-v10";case"light-v10":return"dark-v10";case"dark-v10":return"streets-v11";case"streets-v11":return"satellite-v9";default:console.log("Sorry, the style '".concat(e,"' doesn't exist."))}},L=function(){return Object(v.usePromiseTracker)({delay:3e3}).promiseInProgress&&n.a.createElement(B,null)},V=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).handleReload=function(){document.location.reload()},e.handleSwitchTheme=function(){var t=e.state.mapStyle;e.setState({mapStyle:P(t)})},e.handleSetLive=function(){e.setState({currentTime:Date.now()})},e.handleToggleCharts=function(){e.setState({chartsExpanded:!e.state.chartsExpanded})},e.handleCollapseCharts=function(){e.setState({chartsExpanded:!1})},e.handleToggleFilters=function(){e.setState({filtersExpanded:!e.state.filtersExpanded})},e.handleCollapseFilters=function(){e.setState({filtersExpanded:!1})},e.setCountryFilter=function(t){e.setState({filteredRegions:t});var a=e.state.data,r=a.fetched;t&&t.length>0?(t=t.map((function(e){return e.value})),a.filtered=function(e,t,a){var r={};return Object.keys(a).forEach((function(n){r[n]=T(e,t,a[n])})),r}(["province","country"],t,r)):a.filtered=a.fetched,e.setState({data:a})},e.setTime=function(t){e.setState({currentTime:t})},e.getLiveData=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J);case 1:case"end":return e.stop()}}),e)}))),e.state={mapStyle:"dark-v10",data:{fetched:{},filtered:{}},survey:{},currentTime:1584820813832,filteredRegions:[],chartsExpanded:!1,filtersExpanded:!1},e.registeredRegions=null,e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLiveData();case 2:t=e.sent,this.setState({data:{fetched:t,filtered:t}}),this.registeredRegions=[{value:"Auenland",label:"Auenland"},{value:"Eriador",label:"Eriador"},{value:"Hyarrostar",label:"Hyarrostar"},{value:"N\xfamenor",label:"N\xfamenor"},{value:"Gorgoroth",label:"Gorgoroth"},{value:"Mordor",label:"Mordor"}];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=this.registeredRegions,a=this.setCountryFilter,r=this.handleToggleCharts,o=this.handleCollapseCharts,c=this.handleToggleFilters,l=this.handleCollapseFilters,i=e.mapStyle,s=e.data.filtered,d=e.currentTime,u=e.filteredRegions,m=e.chartsExpanded,f=e.filtersExpanded,h=function(e){var t={type:"FeatureCollection",features:[]};if(e){var a=[],r=!0,n=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var i=c.value,s=i.province,d=i.country,u=i.confirmed,m=i.recovered,f=i.deaths,h=i.latlng,v=Object(E.a)(h,2),p=v[0],g=v[1];a.push({type:"Feature",properties:{province:s,country:d,confirmed:Number(u),recovered:Number(m),deaths:Number(f)},geometry:{type:"Point",coordinates:[Number(g),Number(p)]}})}}catch(y){n=!0,o=y}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}t.features=a}return t}(s[d]);return n.a.createElement("div",{className:"app"},n.a.createElement(L,null),n.a.createElement(p.a,{open:f,onClose:l,classNames:{modal:"modal-filters"},center:!0},n.a.createElement("h2",null,"Data filters"),n.a.createElement(g.a,{isMulti:!0,name:"countries",options:t,defaultValue:u,onChange:a})),n.a.createElement(H,{data:s,currentTime:d,chartsExpanded:m,onToggleFilters:c,onToggleCharts:r}),h&&n.a.createElement(C,{data:h,mapStyle:i,onClick:o}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.fee5fdc3.chunk.js.map