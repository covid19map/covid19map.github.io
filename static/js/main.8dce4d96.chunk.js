(this["webpackJsonpcorona-cub"]=this["webpackJsonpcorona-cub"]||[]).push([[0],{109:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),o=(a(99),a(36)),i=a.n(o),s=a(59),u=a(24),d=a(25),m=a(27),h=a(26),v=a(28),f=a(83),p=a(21),E=a(20),g=a(91),b=a(90),y=(a(109),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleToggle=function(){e.setState({isExpanded:!e.state.isExpanded})},e.handleCollapse=function(){e.setState({isExpanded:!1})},e.state={isExpanded:!1},e}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=this.handleToggle,a=e.isExpanded,l="navigation ".concat(a?"expanded":""),c="navigation-toggle ".concat(a?"expanded":"");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:c,onClick:t},r.a.createElement(x,null)),r.a.createElement("nav",{className:l},r.a.createElement("div",{className:"navigation__brand"},"Corona",r.a.createElement("span",null,"hub")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(C,null),r.a.createElement(p.b,{to:"/",activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(w,null),r.a.createElement(p.b,{to:"/table",activeClassName:"active"},"Table")),r.a.createElement("li",null,r.a.createElement(N,null),r.a.createElement(p.b,{to:"/survey",activeClassName:"active"},"Survey")),r.a.createElement("li",null,r.a.createElement(z,null),r.a.createElement(p.b,{to:"/contact",activeClassName:"active"},"Contact")),r.a.createElement("li",null,r.a.createElement(j,null),r.a.createElement(p.b,{to:"/imprint",activeClassName:"active"},"Imprint")))))}}]),t}(n.Component)),x=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"}))},C=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z"}))},w=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M20 19h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm16-14v22h-24v-22h24zm-2 6h-20v14h20v-14zm-8 8h-4v4h4v-4zm-6-6h-4v4h4v-4z"}))},N=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M7 16h10v1h-10v-1zm0-1h10v-1h-10v1zm15-13v22h-20v-22h3c1.229 0 2.18-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1s1-.448 1-1-.448-1-1-1-1 .448-1 1zm9 1h-4l-2 2h-3.898l-2.102-2h-4v18h16v-18zm-13 9h10v-1h-10v1zm0-2h10v-1h-10v1z"}))},z=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"}))},j=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M20 12.875v5.068c0 2.754-5.789 4.057-9 4.057-3.052 0-9-1.392-9-4.057v-6.294l9 4.863 9-3.637zm-8.083-10.875l-12.917 5.75 12 6.5 11-4.417v7.167h2v-8.25l-12.083-6.75zm13.083 20h-4c.578-1 1-2.5 1-4h2c0 1.516.391 2.859 1 4z"}))},k=a(45),O=a(31),S={id:"clusters",type:"circle",source:"covid-19",paint:{"circle-color":["step",["get","confirmed"],"#03befc",20,"#f1f075",800,"#f28cb1",5e3,"#ba1818"],"circle-radius":["step",["zoom"],4,2,6,4,["interpolate",["cubic-bezier",0,.5,1,.5],["get","confirmed"],20,8,5e3,25]]}},T={id:"cluster-count",type:"symbol",source:"covid-19",layout:{"text-field":["get","confirmed"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["zoom"],0,4,11]}},F=(a(111),function(e){var t=e.data,a=e.mapStyle,l=e.onClick,c=Object(n.useState)({width:"100vw",height:"100vh",latitude:45,longitude:10,zoom:4}),o=Object(k.a)(c,2),i=o[0],s=o[1],u="mapbox://styles/mapbox/".concat(a);return r.a.createElement(O.d,Object.assign({},i,{onViewportChange:s,mapboxApiAccessToken:"pk.eyJ1IjoiZ2lhbm5vdHIiLCJhIjoiY2s3aHFkcDkwMGMzYjNlbzNvMWl4bGFxbyJ9.2p2O5m7aiA6Bn9vjPe7HrQ",mapStyle:u,onClick:l}),r.a.createElement(O.c,{id:"covid-19",type:"geojson",data:t},r.a.createElement(O.a,S),r.a.createElement(O.a,T)),r.a.createElement("div",{style:{position:"absolute",bottom:"45px",right:"20px"}},r.a.createElement(O.b,null)))}),M=a(88),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).node=null,a.chart=null,a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.chart=new M.a(this.node,{type:"line",data:{labels:[1,2,3,4,5,6],datasets:[{label:"Ping Numbers",data:[50,44,30,10,100,1],borderColor:"#333",backgroundColor:"transparent",borderWidth:2}]},options:{elements:{point:{radius:0}},legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0}}]}}})}},{key:"render",value:function(){var e=this;return r.a.createElement("canvas",{ref:function(t){return e.node=t}})}}]),t}(n.Component),_=function(e,t){return e+t},B=function(e,t){return e||t},D=function(e){return"object"!==typeof e&&(e=[e]),e},I=function(e,t){return e?t.map((function(t){return t[e]})).reduce(_,0):0},R=function(e,t){var a={};return Object.keys(t).forEach((function(n){a[n]=function(e,t){return"object"===typeof e?e.map((function(e){return I(e,t)})).reduce(_,0):I(e,t)}(e,t[n])})),a},H=function(e,t,a){return a.filter((function(a){return n=t,r=D(e).map((function(e){return a[e]})),!n||r.map((function(e){return n.includes(e)})).reduce(B,!1);var n,r}))},G=new Intl.NumberFormat("en-US"),P=function(e){return G.format(e)},J=new Intl.NumberFormat("en-IN",{maximumSignificantDigits:3}),L=function(e){return J.format(e)},W=(a(203),function(e){var t=e.confirmed,a=e.deaths,l=e.recovered;return r.a.createElement(n.Fragment,null,r.a.createElement(U,{cls:"confirmed",heading:"Confirmed"},P(t)),r.a.createElement(U,{cls:"recovered",heading:"Recovered"},P(l)),r.a.createElement(U,{cls:"deaths",heading:"Deaths"},P(a)),r.a.createElement(U,{cls:"computations",heading:"Computations"},r.a.createElement("div",null,"Active cases: ",P(t-a-l)),r.a.createElement("div",null,"Recover rate: ","".concat(L(l/t*100),"%")),r.a.createElement("div",null,"Mortality rate: ","".concat(L(a/t*100),"%"))))}),U=function(e){var t=e.cls,a=e.heading,n=e.children;return t="data-panel__tile ".concat(t),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"data-panel__tile__heading"},a),r.a.createElement("div",{className:"data-panel__tile__content"},n))},V=function(e){var t=e.onToggleFilters,a=e.onToggleCharts;return r.a.createElement("div",{className:"data-panel__controls"},r.a.createElement("span",{onClick:t},r.a.createElement(Y,null)),r.a.createElement("span",{onClick:a},r.a.createElement(Z,null)))},Y=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M1 0l9 15.094v5.906l4 3v-8.906l9-15.094h-22zm18.479 2l-2.981 5h-8.996l-2.981-5h14.958z"}))},Z=function(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M24 11.871l-5-4.871v3h-19v4h19v3z"}))},Q=function(e){var t=e.data,a=e.currentTime,l=e.chartsExpanded,c=e.onToggleFilters,o=e.onToggleCharts,i=R("confirmed",t),s=R("recovered",t),u=R("deaths",t),d={confirmed:i[a],recovered:s[a],deaths:u[a]},m={onToggleFilters:c,onToggleCharts:o},h="charts-container ".concat(l?"expanded":"");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"data-panel"},r.a.createElement(W,d),r.a.createElement(V,m)),r.a.createElement("div",{className:h},r.a.createElement(A,null)))},$=a(92),q=(a(204),function(){return r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader-title"},"CORONA hub"),r.a.createElement("div",{className:"loader"},Object($.a)(Array(25).keys()).map((function(e){return r.a.createElement("div",{key:e})}))))}),K=function(){return r.a.createElement("div",{className:"survey"},r.a.createElement("h2",null,"Survey"))},X=(a(205),{15848205e5:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:1e4,recovered:1,deaths:5e3,active:4999},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:1e5,recovered:1e3,deaths:6e4,active:39e3},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:20,recovered:0,deaths:0,active:20}],15848208e5:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:2e4,recovered:10,deaths:15e3,active:9990},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:1e5,recovered:4e4,deaths:6e4,active:0},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:50,recovered:10,deaths:20,active:20}],1584820813832:[{province:"Auenland",country:"Eriador",latlng:[51,9],confirmed:1e5,recovered:20,deaths:5e4,active:49980},{province:"Hyarrostar",country:"N\xfamenor",latlng:[52,10],confirmed:16e4,recovered:8e4,deaths:65e3,active:15e3},{province:"Gorgoroth",country:"Mordor",latlng:[50,7],confirmed:200,recovered:40,deaths:80,active:80}]}),ee=function(e){switch(e){case"satellite-v9":return"light-v10";case"light-v10":return"dark-v10";case"dark-v10":return"streets-v11";case"streets-v11":return"satellite-v9";default:console.log("Sorry, the style '".concat(e,"' doesn't exist."))}},te=function(){return Object(f.usePromiseTracker)({delay:3e3}).promiseInProgress&&r.a.createElement(q,null)},ae=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleReload=function(){document.location.reload()},e.handleSwitchTheme=function(){var t=e.state.mapStyle;e.setState({mapStyle:ee(t)})},e.handleSetLive=function(){e.setState({currentTime:Date.now()})},e.handleToggleCharts=function(){e.setState({chartsExpanded:!e.state.chartsExpanded})},e.handleCollapseCharts=function(){e.setState({chartsExpanded:!1})},e.handleToggleFilters=function(){e.setState({filtersExpanded:!e.state.filtersExpanded})},e.handleCollapseFilters=function(){e.setState({filtersExpanded:!1})},e.setCountryFilter=function(t){e.setState({filteredRegions:t});var a=e.state.data,n=a.fetched;t&&t.length>0?(t=t.map((function(e){return e.value})),a.filtered=function(e,t,a){var n={};return Object.keys(a).forEach((function(r){n[r]=H(e,t,a[r])})),n}(["province","country"],t,n)):a.filtered=a.fetched,e.setState({data:a})},e.setTime=function(t){e.setState({currentTime:t})},e.getLiveData=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X);case 1:case"end":return e.stop()}}),e)}))),e.state={mapStyle:"dark-v10",data:{fetched:{},filtered:{}},survey:{},currentTime:1584820813832,filteredRegions:[],chartsExpanded:!1,filtersExpanded:!1},e.registeredRegions=null,e}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLiveData();case 2:t=e.sent,this.setState({data:{fetched:t,filtered:t}}),this.registeredRegions=[{value:"Auenland",label:"Auenland"},{value:"Eriador",label:"Eriador"},{value:"Hyarrostar",label:"Hyarrostar"},{value:"N\xfamenor",label:"N\xfamenor"},{value:"Gorgoroth",label:"Gorgoroth"},{value:"Mordor",label:"Mordor"}];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=this.registeredRegions,a=this.setCountryFilter,l=this.handleToggleCharts,c=this.handleCollapseCharts,o=this.handleToggleFilters,i=this.handleCollapseFilters,s=e.mapStyle,u=e.data.filtered,d=e.currentTime,m=e.filteredRegions,h=e.chartsExpanded,v=e.filtersExpanded,f=function(e){var t={type:"FeatureCollection",features:[]};if(e){var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value,s=i.province,u=i.country,d=i.confirmed,m=i.recovered,h=i.deaths,v=i.latlng,f=Object(k.a)(v,2),p=f[0],E=f[1];a.push({type:"Feature",properties:{province:s,country:u,confirmed:Number(d),recovered:Number(m),deaths:Number(h)},geometry:{type:"Point",coordinates:[Number(E),Number(p)]}})}}catch(g){r=!0,l=g}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}t.features=a}return t}(u[d]);return r.a.createElement(p.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(te,null),r.a.createElement(y,null),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/"},r.a.createElement(g.a,{open:v,onClose:i,classNames:{modal:"modal-filters"},center:!0},r.a.createElement("h2",null,"Data filters"),r.a.createElement(b.a,{isMulti:!0,name:"countries",options:t,defaultValue:m,onChange:a})),r.a.createElement(Q,{data:u,currentTime:d,chartsExpanded:h,onToggleFilters:o,onToggleCharts:l}),f&&r.a.createElement(F,{data:f,mapStyle:s,onClick:c})),r.a.createElement(E.a,{path:"/table"},r.a.createElement(n.Fragment,null)),r.a.createElement(E.a,{path:"/survey"},r.a.createElement(K,null)),r.a.createElement(E.a,{path:"/contact"},r.a.createElement(n.Fragment,null)),r.a.createElement(E.a,{path:"/imprint"},r.a.createElement(n.Fragment,null)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,a){e.exports=a(206)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.8dce4d96.chunk.js.map